from numpy import array, vstack, ndarray

# Letters are constructed as numpy arrays of ones and zeros.
# Each row represents a column of keys, for easier construction.
# Array spot (0, 0) is the bottom left corner of the letter. Moving right in the array
# corresponds to moving up on the letter.
letters = {
    "A": array([[1, 1, 1, 1, 1, 0],
                [0, 0, 1, 0, 0, 1],
                [0, 0, 1, 0, 0, 1],
                [1, 1, 1, 1, 1, 0]
                ]),
    "B": array([[1, 1, 1, 1, 1, 1],
                [1, 0, 0, 1, 0, 1],
                [1, 0, 0, 1, 0, 1],
                [0, 1, 1, 0, 1, 0]
                ]),
    "C": array([[0, 1, 1, 1, 1, 0],
                [1, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 1],
                [0, 1, 0, 0, 1, 0]
                ]),
    "D": array([[1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 1],
                [1, 0, 1, 0, 0, 1],
                [0, 1, 1, 1, 1, 0]
                ]),
    "E": array([[1, 1, 1, 1, 1, 1],
                [1, 0, 0, 1, 0, 1],
                [1, 0, 0, 1, 0, 1],
                [1, 0, 0, 0, 0, 1]
                ]),
    "F": array([[1, 1, 1, 1, 1, 1],
                [0, 0, 0, 1, 0, 1],
                [0, 0, 0, 1, 0, 1],
                [0, 0, 0, 0, 0, 1]
                ]),
    "G": array([[0, 1, 1, 1, 1, 0],
                [1, 0, 0, 0, 0, 1],
                [1, 0, 0, 1, 0, 1],
                [1, 1, 1, 1, 0, 1]
                ]),
    "H": array([[1, 1, 1, 1, 1, 1],
                [0, 0, 0, 1, 0, 0],
                [0, 0, 0, 1, 0, 0],
                [1, 1, 1, 1, 1, 1]
                ]),
    "I": array([[1, 0, 0, 0, 0, 1],
                [1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 1],
                ]),
    "J": array([[0, 1, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0],
                [0, 1, 1, 1, 1, 1]
                ]),
    "K": array([[1, 1, 1, 1, 1, 1],
                [0, 0, 1, 1, 0, 0],
                [0, 1, 0, 0, 1, 0],
                [1, 0, 0, 0, 0, 1]
                ]),
    "L": array([[1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0]
                ]),
    "M": array([[1, 1, 1, 1, 1, 1],
                [0, 0, 0, 1, 0, 0],
                [0, 1, 1, 0, 0, 0],
                [0, 0, 0, 1, 0, 0],
                [1, 1, 1, 1, 1, 1]
                ]),
    "N": array([[1, 1, 1, 1, 1, 1],
                [0, 0, 0, 1, 0, 0],
                [0, 0, 1, 0, 0, 0],
                [1, 1, 1, 1, 1, 1]
                ]),
    "O": array([[0, 1, 1, 1, 1, 0],
                [1, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 1],
                [0, 1, 1, 1, 1, 0]
                ]),
    "P": array([[1, 1, 1, 1, 1, 1],
                [0, 0, 1, 0, 0, 1],
                [0, 0, 1, 0, 0, 1],
                [0, 0, 0, 1, 1, 0]
                ]),
    "Q": array([[0, 0, 1, 1, 1, 0],
                [0, 1, 0, 0, 0, 1],
                [0, 1, 0, 0, 0, 1],
                [1, 0, 1, 1, 1, 0]
                ]),
    "R": array([[1, 1, 1, 1, 1, 1],
                [0, 0, 1, 0, 0, 1],
                [0, 0, 1, 0, 0, 1],
                [1, 1, 0, 1, 1, 0]
                ]),
    "S": array([[1, 0, 0, 0, 1, 0],
                [1, 0, 0, 1, 0, 1],
                [1, 0, 0, 1, 0, 1],
                [0, 1, 1, 0, 0, 1]
                ]),
    "T": array([[0, 0, 0, 0, 0, 1],
                [1, 1, 1, 1, 1, 1],
                [0, 0, 0, 0, 0, 1]
                ]),
    "W": array([[1, 1, 1, 1, 1, 1],
                [0, 1, 0, 0, 0, 0],
                [0, 0, 1, 0, 0, 0],
                [0, 1, 0, 0, 0, 0],
                [1, 1, 1, 1, 1, 1]
                ]),
    "X": array([[1, 0, 0, 0, 0, 1],
                [0, 1, 0, 0, 1, 0],
                [0, 0, 1, 1, 0, 0],
                [0, 1, 0, 0, 1, 0],
                [1, 0, 0, 0, 0, 1]
                ]),
    "Y": array([[0, 0, 0, 0, 0, 1],
                [0, 0, 0, 1, 1, 0],
                [1, 1, 1, 0, 0, 0],
                [0, 0, 0, 1, 1, 0],
                [0, 0, 0, 0, 0, 1]
                ]),
    "Z": array([[1, 1, 0, 0, 0, 1],
                [1, 0, 1, 0, 0, 1],
                [1, 0, 0, 1, 0, 1],
                [1, 0, 0, 0, 1, 1]
                ]),
    "a": array([[0, 1, 0, 0, 0, 0],
                [1, 0, 1, 0, 1, 0],
                [1, 0, 1, 0, 1, 0],
                [1, 1, 1, 1, 0, 0]
                ]),
    "b": array([[1, 1, 1, 1, 1, 1],
                [1, 0, 0, 1, 0, 0],
                [1, 0, 0, 1, 0, 0],
                [0, 1, 1, 0, 0, 0]
                ]),
    "c": array([[0, 1, 1, 1, 0, 0],
                [1, 0, 0, 0, 1, 0],
                [1, 0, 0, 0, 1, 0],
                [0, 1, 0, 1, 0, 0]
                ]),
    "d": array([[0, 1, 1, 0, 0, 0],
                [1, 0, 0, 1, 0, 0],
                [1, 0, 0, 1, 0, 0],
                [1, 1, 1, 1, 1, 1]
                ]),
    "e": array([[0, 1, 1, 1, 0, 0],
                [1, 0, 1, 0, 1, 0],
                [1, 0, 1, 0, 1, 0],
                [1, 0, 0, 1, 0, 0]
                ]),
    "f": array([[0, 0, 0, 1, 0, 0],
                [1, 1, 1, 1, 1, 1],
                [0, 0, 0, 1, 0, 1],
                [0, 0, 0, 0, 0, 1]
                ]),
    "g": array([[1, 0, 1, 1, 0, 0],
                [1, 0, 1, 0, 1, 0],
                [1, 0, 1, 0, 1, 0],
                [0, 1, 1, 1, 1, 0]
                ]),
    "h": array([[1, 1, 1, 1, 1, 1],
                [0, 0, 0, 1, 0, 0],
                [0, 0, 0, 1, 0, 0],
                [1, 1, 1, 0, 0, 0]
                ]),
    "i": array([[0, 0, 1, 0, 0, 0],
                [1, 1, 1, 0, 1, 0],
                ]),
    "j": array([[0, 1, 0, 0, 0, 0],
                [1, 0, 0, 1, 0, 0],
                [1, 1, 1, 1, 0, 0],
                [0, 0, 0, 1, 0, 0]
                ]),
    "k": array([[1, 1, 1, 1, 1, 1],
                [0, 0, 1, 0, 0, 0],
                [0, 1, 0, 1, 0, 0],
                [1, 0, 0, 0, 1, 0]
                ]),
    "l": array([[1, 0, 0, 0, 0, 1],
                [1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 0]
                ]),
    "m": array([[1, 1, 1, 1, 0, 0],
                [0, 0, 0, 1, 0, 0],
                [0, 0, 1, 0, 0, 0],
                [0, 0, 0, 1, 0, 0],
                [1, 1, 1, 0, 0, 0]
                ]),
    "n": array([[1, 1, 1, 1, 0, 0],
                [0, 0, 0, 1, 0, 0],
                [0, 0, 0, 1, 0, 0],
                [1, 1, 1, 0, 0, 0]
                ]),
    "o": array([[0, 1, 1, 0, 0, 0],
                [1, 0, 0, 1, 0, 0],
                [1, 0, 0, 1, 0, 0],
                [0, 1, 1, 0, 0, 0]
                ]),
    "p": array([[1, 1, 1, 1, 1, 0],
                [0, 0, 1, 0, 1, 0],
                [0, 0, 1, 0, 1, 0],
                [0, 0, 0, 1, 0, 0]
                ]),
    "q": array([[0, 0, 0, 1, 0, 0],
                [0, 0, 1, 0, 1, 0],
                [0, 0, 1, 0, 1, 0],
                [1, 1, 1, 1, 1, 0]
                ]),
    "r": array([[1, 1, 1, 1, 1, 0],
                [0, 0, 0, 1, 0, 0],
                [0, 0, 0, 0, 1, 0],
                [0, 0, 0, 0, 1, 0]
                ]),
    "s": array([[0, 0, 0, 1, 0, 0],
                [1, 0, 1, 0, 1, 0],
                [1, 0, 1, 0, 1, 0],
                [0, 1, 0, 0, 0, 0]
                ]),
    "t": array([[0, 0, 0, 1, 0, 0],
                [1, 1, 1, 1, 1, 1],
                [0, 0, 0, 1, 0, 0]
                ]),
    "u": array([[0, 1, 1, 1, 0, 0],
                [1, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0],
                [1, 1, 1, 1, 0, 0]
                ]),
    "v": array([[0, 0, 1, 1, 0, 0],
                [0, 1, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0],
                [0, 1, 0, 0, 0, 0],
                [0, 0, 1, 1, 0, 0]
                ]),
    "w": array([[1, 1, 1, 1, 0, 0],
                [1, 0, 0, 0, 0, 0],
                [0, 1, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0],
                [0, 1, 1, 1, 0, 0]
                ]),
    "x": array([[1, 0, 1, 0, 0, 0],
                [0, 1, 0, 0, 0, 0],
                [1, 0, 1, 0, 0, 0]
                ]),
    "y": array([[0, 0, 0, 1, 1, 0],
                [1, 0, 1, 0, 0, 0],
                [1, 0, 1, 0, 0, 0],
                [0, 1, 0, 1, 1, 0]
                ]),
    "z": array([[1, 1, 0, 0, 1, 0],
                [1, 0, 1, 0, 1, 0],
                [1, 0, 1, 0, 1, 0],
                [1, 1, 0, 1, 1, 0]
                ]),
    " ": array([[0, 0, 0, 0, 0, 0]]),
    "!": array([[1, 0, 1, 1, 1, 1]]),
    ".": array([[0, 1, 0, 0, 0, 0]]),
    "?": array([[0, 0, 0, 0, 1, 0],
                [0, 0, 0, 0, 0, 1],
                [1, 0, 1, 0, 0, 1],
                [0, 0, 0, 1, 1, 0]
                ]),
    ",": array([[1, 0, 0, 0, 0, 0],
                [0, 1, 0, 0, 0, 0]
                ]),
    "1": array([[1, 0, 0, 0, 1, 0],
                [1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 0]
                ]),
    "2": array([[1, 1, 0, 0, 1, 0],
                [1, 0, 1, 0, 0, 1],
                [1, 0, 1, 0, 0, 1],
                [1, 0, 0, 1, 1, 0]
                ]),
    "3": array([[1, 0, 0, 1, 0, 1],
                [1, 0, 0, 1, 0, 1],
                [1, 0, 0, 1, 0, 1],
                [0, 1, 1, 0, 1, 0]
                ]),
    "4": array([[0, 0, 0, 1, 1, 1],
                [0, 0, 1, 0, 0, 0],
                [0, 0, 1, 0, 0, 0],
                [1, 1, 1, 1, 1, 1]
                ]),
    "5": array([[1, 0, 0, 1, 1, 1],
                [1, 0, 0, 1, 0, 1],
                [1, 0, 0, 1, 0, 1],
                [0, 1, 1, 0, 0, 1]
                ]),
    "6": array([[0, 1, 1, 1, 1, 0],
                [1, 0, 0, 1, 0, 1],
                [1, 0, 0, 1, 0, 1],
                [0, 1, 1, 0, 0, 1]
                ]),
    "7": array([[0, 0, 0, 0, 0, 1],
                [1, 1, 0, 0, 0, 1],
                [0, 0, 1, 1, 0, 1],
                [0, 0, 0, 0, 1, 1]
                ]),
    "8": array([[0, 1, 1, 0, 1, 0],
                [1, 0, 0, 1, 0, 1],
                [1, 0, 0, 1, 0, 1],
                [0, 1, 1, 0, 1, 0]
                ]),
    "9": array([[0, 0, 0, 1, 1, 0],
                [0, 0, 1, 0, 0, 1],
                [0, 0, 1, 0, 0, 1],
                [1, 1, 1, 1, 1, 0]
                ]),
    "0": array([[0, 1, 1, 1, 1, 0],
                [1, 0, 1, 0, 0, 1],
                [1, 0, 0, 1, 0, 1],
                [0, 1, 1, 1, 1, 0]
                ]),
    "\'": array([[0, 0, 0, 0, 1, 1]]),
    "\"": array([[0, 0, 0, 0, 1, 1],
                 [0, 0, 0, 0, 0, 0],
                 [0, 0, 0, 0, 1, 1]]),
}


def from_string(string: str) -> ndarray:
    """
    Only use letters if the grid layout is column-major
    """
    out = vstack((letters[string[0]], letters[" "]))
    for letter in string[1:]:
        out = vstack((out, letters[letter]))
        out = vstack((out, letters[" "]))
    return out
